
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Pydantic Models 文档 - 全面介绍如何使用 BaseModel 创建数据验证模型，包括字段定义、数据验证、序列化、嵌套模型、错误处理和高级特性。学习 Pydantic V2 模型的最佳实践，掌握数据转换、类型注解、模型配置和验证方法，提升 Python 数据处理能力。">
      
      
      
        <link rel="canonical" href="https://docs.pydantic.dev/latest/concepts/models/">
      
      
        <link rel="prev" href="../../contributing/">
      
      
        <link rel="next" href="../fields/">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Models - Pydantic Validation 中文文档</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../extra/terminal.css">
    
      <link rel="stylesheet" href="../../extra/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Pydantic Validation 中文文档" class="md-header__button md-logo" aria-label="Pydantic Validation 中文文档" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic Validation 中文文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Models
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="pink"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/pydantic/pydantic" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  快速开始

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  概念

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/base_model/" class="md-tabs__link">
          
  
  
  API 参考

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../internals/architecture/" class="md-tabs__link">
          
  
  
  内部实现

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/files/" class="md-tabs__link">
          
  
  
  示例

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../errors/errors/" class="md-tabs__link">
          
  
  
  错误信息

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../integrations/logfire/" class="md-tabs__link">
          
  
  
  集成

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pydantic Validation 中文文档" class="md-nav__button md-logo" aria-label="Pydantic Validation 中文文档" data-md-component="logo">
      
  <img src="../../logo-white.svg" alt="logo">

    </a>
    Pydantic Validation 中文文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pydantic/pydantic" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    pydantic/pydantic
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    快速开始
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            快速开始
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Welcome to Pydantic
    
      <br>
      <small>欢迎使用 Pydantic</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why use Pydantic
    
      <br>
      <small>为什么使用 Pydantic</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../help_with_pydantic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Help with Pydantic
    
      <br>
      <small>获取帮助</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
      <br>
      <small>安装</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migration Guide
    
      <br>
      <small>迁移指南</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../version-policy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version Policy
    
      <br>
      <small>版本策略</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
      <br>
      <small>贡献</small>
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    概念
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            概念
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Models
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      基本模型用法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基本模型用法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-methods-and-properties" class="md-nav__link">
    <span class="md-ellipsis">
      模型方法和属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      数据转换
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-data" class="md-nav__link">
    <span class="md-ellipsis">
      额外数据
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-models" class="md-nav__link">
    <span class="md-ellipsis">
      嵌套模型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rebuilding-model-schema" class="md-nav__link">
    <span class="md-ellipsis">
      重建模型模式
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      任意类实例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="任意类实例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      嵌套属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      错误处理
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validating-data" class="md-nav__link">
    <span class="md-ellipsis">
      验证数据
    </span>
  </a>
  
    <nav class="md-nav" aria-label="验证数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-models-without-validation" class="md-nav__link">
    <span class="md-ellipsis">
      创建模型而不进行验证
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-copy" class="md-nav__link">
    <span class="md-ellipsis">
      模型复制
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generic-models" class="md-nav__link">
    <span class="md-ellipsis">
      泛型模型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="泛型模型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      未参数化类型变量的验证
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      未参数化类型变量的序列化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-model-creation" class="md-nav__link">
    <span class="md-ellipsis">
      动态模型创建
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rootmodel-and-custom-root-types" class="md-nav__link">
    <span class="md-ellipsis">
      RootModel 和自定义根类型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faux-immutability" class="md-nav__link">
    <span class="md-ellipsis">
      伪不可变性
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      抽象基类
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      字段排序
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      自动排除的属性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="自动排除的属性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      类变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      私有模型属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      模型签名
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      结构化模式匹配
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribute-copies" class="md-nav__link">
    <span class="md-ellipsis">
      属性复制
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fields
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JSON Schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../json/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JSON
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alias/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alias
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serialization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dataclasses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dataclasses
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../forward_annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Forward Annotations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../strict_mode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strict Mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../type_adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Type Adapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation_decorator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validation Decorator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conversion_table/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conversion Table
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pydantic_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Performance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../experimental/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Experimental
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API 参考
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API 参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pydantic
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Pydantic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/base_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BaseModel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/root_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RootModel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/dataclasses/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic Dataclasses
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/type_adapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TypeAdapter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/validate_call/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validate Call
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/fields/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fields
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/aliases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aliases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/json_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JSON Schema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Errors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_validators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functional Validators
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/functional_serializers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functional Serializers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/standard_library_types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Standard Library Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/networks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Types
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/version/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Version Information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/annotated_handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Annotated Handlers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/experimental/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Experimental
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pydantic Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic_core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_core_schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic_core.core_schema
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pydantic Extra Types
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Pydantic Extra Types
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_color/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Color
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_country/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Country
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_payment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Payment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_phone_numbers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Phone Numbers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_routing_numbers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Routing Numbers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_coordinate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coordinate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_mac_address/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mac Address
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_isbn/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ISBN
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_pendulum_dt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pendulum
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_currency_code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Currency
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_language_code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Language
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_script_code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Script Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_semantic_version/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Semantic Version
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/pydantic_extra_types_timezone_name/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timezone Name
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    内部实现
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            内部实现
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internals/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
      <br>
      <small>架构</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../internals/resolving_annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resolving Annotations
    
      <br>
      <small>解析注解</small>
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    示例
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            示例
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/files/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validating File Data
    
      <br>
      <small>验证文件数据</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/requests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web and API Requests
    
      <br>
      <small>验证 HTTP 请求数据</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/queues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queues
    
      <br>
      <small>验证队列数据</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/orms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Databases
    
      <br>
      <small>验证 ORM 数据</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/custom_validators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Validators
    
      <br>
      <small>自定义验证器</small>
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    错误信息
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            错误信息
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Handling
    
      <br>
      <small>错误处理</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/validation_errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validation Errors
    
      <br>
      <small>验证错误</small>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errors/usage_errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage Errors
    
      <br>
      <small>使用错误</small>
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    集成
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            集成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/logfire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic Logfire
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/llms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLMs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    开发工具
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            开发工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/mypy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mypy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/pyrefly/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pyrefly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/pycharm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PyCharm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/hypothesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hypothesis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/visual_studio_code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visual Studio Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/datamodel_code_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    datamodel-code-generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/devtools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    devtools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/rich/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rich
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/linting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_4" >
        
          
          <label class="md-nav__link" for="__nav_7_4" id="__nav_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    生产工具
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_4">
            <span class="md-nav__icon md-icon"></span>
            生产工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/aws_lambda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS Lambda
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Page contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Page contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      基本模型用法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基本模型用法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-methods-and-properties" class="md-nav__link">
    <span class="md-ellipsis">
      模型方法和属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-conversion" class="md-nav__link">
    <span class="md-ellipsis">
      数据转换
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extra-data" class="md-nav__link">
    <span class="md-ellipsis">
      额外数据
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-models" class="md-nav__link">
    <span class="md-ellipsis">
      嵌套模型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rebuilding-model-schema" class="md-nav__link">
    <span class="md-ellipsis">
      重建模型模式
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      任意类实例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="任意类实例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      嵌套属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      错误处理
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validating-data" class="md-nav__link">
    <span class="md-ellipsis">
      验证数据
    </span>
  </a>
  
    <nav class="md-nav" aria-label="验证数据">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-models-without-validation" class="md-nav__link">
    <span class="md-ellipsis">
      创建模型而不进行验证
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model-copy" class="md-nav__link">
    <span class="md-ellipsis">
      模型复制
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generic-models" class="md-nav__link">
    <span class="md-ellipsis">
      泛型模型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="泛型模型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      未参数化类型变量的验证
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      未参数化类型变量的序列化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamic-model-creation" class="md-nav__link">
    <span class="md-ellipsis">
      动态模型创建
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rootmodel-and-custom-root-types" class="md-nav__link">
    <span class="md-ellipsis">
      RootModel 和自定义根类型
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#faux-immutability" class="md-nav__link">
    <span class="md-ellipsis">
      伪不可变性
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      抽象基类
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#field-ordering" class="md-nav__link">
    <span class="md-ellipsis">
      字段排序
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      自动排除的属性
    </span>
  </a>
  
    <nav class="md-nav" aria-label="自动排除的属性">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      类变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      私有模型属性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      模型签名
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      结构化模式匹配
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#attribute-copies" class="md-nav__link">
    <span class="md-ellipsis">
      属性复制
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Models</h1>

<details class="api">
<summary>API 文档</summary>
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel"><code>pydantic.main.BaseModel</code></a><br></p>
</details>
<p>在 Pydantic 中定义模式的主要方式之一是通过模型。模型是继承自 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel"><code>BaseModel</code></a> 的简单类，并将字段定义为带注解的属性。</p>
<p>您可以将模型视为类似于 C 等语言中的结构体，或者作为 API 中单个端点的要求。</p>
<p>模型与 Python 的 <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/dataclasses.html#module-dataclasses">dataclasses</a> 有许多相似之处，但设计上存在一些微妙但重要的差异，这些差异简化了与验证、序列化和 JSON 模式生成相关的某些工作流程。
您可以在文档的 <a href="../dataclasses/">Dataclasses</a> 部分找到更多关于此的讨论。</p>
<p>不受信任的数据可以传递给模型，在解析和验证之后，Pydantic 保证结果模型实例的字段将符合模型上定义的字段类型。</p>
<div class="admonition note">
<p class="admonition-title">验证 — 一个<em>故意</em>的误称</p>
<p><h3>简要说明</h3></p>
<p>我们使用术语"验证"来指代实例化符合指定类型和约束的模型（或其他类型）的过程。Pydantic 以此闻名，在口语中这个任务最广泛地被认为是"验证"，
尽管在其他上下文中术语"验证"可能更具限制性。</p>
<hr />
<p><h3>详细说明</h3></p>
<p>围绕术语"验证"的潜在混淆源于这样一个事实：严格来说，Pydantic 的主要关注点并不完全符合"验证"的字典定义：</p>
<blockquote>
<p><h3>验证</h3>
<em>名词</em>
检查或证明某物有效性或准确性的行为。</p>
</blockquote>
<p>在 Pydantic 中，术语"验证"指的是实例化符合指定类型和约束的模型（或其他类型）的过程。Pydantic 保证输出的类型和约束，而不是输入数据。
当考虑到 Pydantic 的 <code>ValidationError</code> 在数据无法成功解析为模型实例时被引发时，这种区别变得明显。</p>
<p>虽然这种区别最初可能看起来很微妙，但它具有实际意义。
在某些情况下，"验证"超出了模型创建的范围，可能包括数据的复制和强制转换。
这可能涉及复制传递给构造函数的参数，以便在不改变原始输入数据的情况下执行到新类型的强制转换。
要更深入地了解对您使用的影响，请参考下面的 <a href="#data-conversion">数据转换</a> 和 <a href="#attribute-copies">属性复制</a> 部分。</p>
<p>本质上，Pydantic 的主要目标是确保后处理（称为"验证"）的结果结构精确符合应用的类型提示。
鉴于"验证"作为此过程的通用术语被广泛采用，我们将在文档中一致使用它。</p>
<p>虽然术语"解析"和"验证"以前可以互换使用，但今后我们旨在专门使用"验证"，
而"解析"专门保留用于与 <a href="../json/">JSON 解析</a> 相关的讨论。</p>
</div>
<h2 id="_1">基本模型用法<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pydantic 严重依赖现有的 Python 类型构造来定义模型。如果您不熟悉这些，以下资源可能会有用：</p>
<ul>
<li><a href="https://typing.readthedocs.io/en/latest/guides/index.html">类型系统指南</a></li>
<li><a href="https://mypy.readthedocs.io/en/latest/">mypy 文档</a></li>
</ul>
</div>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Jane Doe&#39;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">str_max_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># (1)!</span>
</code></pre></div>
<ol>
<li>Pydantic 模型支持各种 <a href="../config/">配置值</a>
   （请参阅 <a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict">此处</a> 了解可用的配置值）。</li>
</ol>
<p>在这个例子中，<code>User</code> 是一个有两个字段的模型：</p>
<ul>
<li><code>id</code>，是一个整数（使用 <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int"><code>int</code></a> 类型定义）并且是必需的</li>
<li><code>name</code>，是一个字符串（使用 <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str"><code>str</code></a> 类型定义）并且不是必需的（它有默认值）。</li>
</ul>
<p>关于 <a href="../types/">类型</a> 的文档扩展了支持的类型。</p>
<p>可以使用 <a class="autorefs autorefs-internal" href="../../api/fields/#pydantic.fields.Field"><code>Field()</code></a> 函数以多种方式自定义字段。
有关更多信息，请参阅 <a href="../fields/">字段文档</a>。</p>
<p>然后可以实例化模型：</p>
<div class="language-python highlight"><pre><span></span><code><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>
</code></pre></div>
<p><code>user</code> 是 <code>User</code> 的一个实例。对象的初始化将执行所有解析和验证。
如果没有引发 <a class="autorefs autorefs-internal" href="../../api/pydantic_core/#pydantic_core.ValidationError"><code>ValidationError</code></a> 异常，
您就知道结果模型实例是有效的。</p>
<p>模型的字段可以作为 <code>user</code> 对象的普通属性访问：</p>
<div class="language-python highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;Jane Doe&#39;</span>  <span class="c1"># (1)!</span>
<span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">123</span>  <span class="c1"># (2)!</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</code></pre></div>
<ol>
<li><code>name</code> 在初始化 <code>user</code> 时没有设置，所以使用了默认值。
   可以检查 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_fields_set"><code>model_fields_set</code></a> 属性
   来查看在实例化期间显式设置的字段名称。</li>
<li>注意字符串 <code>'123'</code> 被强制转换为整数，其值为 <code>123</code>。
   有关 Pydantic 强制转换逻辑的更多详细信息可以在 <a href="#data-conversion">数据转换</a> 部分找到。</li>
</ol>
<p>可以使用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_dump"><code>model_dump()</code></a> 方法序列化模型实例：</p>
<div class="language-python highlight"><pre><span></span><code><span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Jane Doe&#39;</span><span class="p">}</span>
</code></pre></div>
<p>在实例上调用 <a class="autorefs autorefs-external" href="https://docs.python.org/3/reference/expressions.html#dict">dict</a> 也会提供一个字典，但嵌套字段不会
递归转换为字典。 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_dump"><code>model_dump()</code></a> 还
提供了许多参数来自定义序列化结果。</p>
<p>默认情况下，模型是可变的，可以通过属性赋值更改字段值：</p>
<div class="language-python highlight"><pre><span></span><code><span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">321</span>
<span class="k">assert</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">321</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>在定义模型时，请注意字段名称与其类型注解之间的命名冲突。</p>
<p>例如，以下内容不会按预期行为，并会产生验证错误：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Boo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">int</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Boo</span><span class="p">(</span><span class="nb">int</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>  <span class="c1"># 验证将失败。</span>
</code></pre></div>
<p>由于 Python 评估 <a class="autorefs autorefs-external" href="https://docs.python.org/3/reference/simple_stmts.html#annassign">带注解的赋值语句</a> 的方式，该语句等同于 <code>int: None = None</code>，因此
导致验证错误。</p>
</div>
<h3 id="model-methods-and-properties">模型方法和属性<a class="headerlink" href="#model-methods-and-properties" title="Permanent link">&para;</a></h3>
<p>上面的例子只展示了模型功能的冰山一角。
模型具有以下方法和属性：</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate()</code></a>: 根据 Pydantic 模型验证给定对象。请参阅 <a href="#validating-data">验证数据</a>。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json"><code>model_validate_json()</code></a>: 根据 Pydantic 模型验证给定的 JSON 数据。请参阅
    <a href="#validating-data">验证数据</a>。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>: 在不运行验证的情况下创建模型。请参阅
    <a href="#creating-models-without-validation">创建不验证的模型</a>。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_dump"><code>model_dump()</code></a>: 返回模型字段和值的字典。请参阅
    <a href="../serialization/#python-mode">序列化</a>。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_dump_json"><code>model_dump_json()</code></a>: 返回 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_dump"><code>model_dump()</code></a> 的 JSON 字符串表示。请参阅 <a href="../serialization/#json-mode">序列化</a>。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_copy"><code>model_copy()</code></a>: 返回模型的副本（默认情况下是浅拷贝）。请参阅
    <a href="#model-copy">模型复制</a>。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_json_schema"><code>model_json_schema()</code></a>: 返回表示模型 JSON 模式的 JSON 可序列化字典。请参阅 <a href="../json_schema/">JSON 模式</a>。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_fields"><code>model_fields</code></a>: 字段名称与其定义（<a class="autorefs autorefs-internal" href="../../api/fields/#pydantic.fields.FieldInfo"><code>FieldInfo</code></a> 实例）之间的映射。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_computed_fields"><code>model_computed_fields</code></a>: 计算字段名称与其定义（<a class="autorefs autorefs-internal" href="../../api/fields/#pydantic.fields.ComputedFieldInfo"><code>ComputedFieldInfo</code></a> 实例）之间的映射。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_extra"><code>model_extra</code></a>: 在验证期间设置的额外字段。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_fields_set"><code>model_fields_set</code></a>: 在模型初始化时显式提供的字段集合。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_parametrized_name"><code>model_parametrized_name()</code></a>: 计算泛型类参数化的类名。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_post_init"><code>model_post_init()</code></a>: 在模型实例化后且所有字段验证器应用后执行其他操作。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a>: 重建模型模式，这也支持构建递归泛型模型。
    请参阅 <a href="#rebuilding-model-schema">重建模型模式</a>。</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>请参阅 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel"><code>BaseModel</code></a> 的 API 文档，了解包括完整方法和属性列表的类定义。</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>请参阅 <a href="../../migration/">迁移指南</a> 中的 <a href="../../migration/#changes-to-pydanticbasemodel">对 <code>pydantic.BaseModel</code> 的更改</a>，
了解 Pydantic V1 的更改详情。</p>
</div>
<h2 id="data-conversion">数据转换<a class="headerlink" href="#data-conversion" title="Permanent link">&para;</a></h2>
<p>Pydantic 可能会强制转换输入数据以使其符合模型字段类型，
在某些情况下这可能导致信息丢失。
例如：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">c</span><span class="p">:</span> <span class="nb">str</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mf">3.000</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;2.72&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sa">b</span><span class="s1">&#39;binary data&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;a&#39;: 3, &#39;b&#39;: 2.72, &#39;c&#39;: &#39;binary data&#39;}</span>
</code></pre></div>
<p>这是 Pydantic 的一个有意决定，通常是最有用的方法。请参阅
<a href="https://github.com/pydantic/pydantic/issues/578">此问题</a> 了解关于该主题的详细讨论。</p>
<p>尽管如此，Pydantic 提供了 <a href="../strict_mode/">严格模式</a>，在该模式下不执行数据转换。
值必须与声明的字段类型相同。</p>
<p>对于集合也是如此。在大多数情况下，您不应该使用抽象容器类，
而应该使用具体类型，例如 <a class="autorefs autorefs-external" href="https://docs.python.org/3/glossary.html#term-list"><code>list</code></a>：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">items</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>  <span class="c1"># (1)!</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="p">(</span><span class="n">items</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)))</span>
<span class="c1">#&gt; items=[1, 2, 3]</span>
</code></pre></div>
<ol>
<li>在这种情况下，您可能会想使用抽象的 <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Sequence"><code>Sequence</code></a> 类型
   来允许列表和元组。但 Pydantic 会负责将元组输入转换为列表，因此
   在大多数情况下这是不必要的。</li>
</ol>
<p>此外，使用这些抽象类型还可能导致 <a href="../performance/#sequence-vs-list-or-tuple-with-mapping-vs-dict">验证性能较差</a>，通常使用具体容器类型
可以避免不必要的检查。</p>
<!-- old anchor added for backwards compatibility -->
<!-- markdownlint-disable-next-line no-empty-links -->
<p><a href="" id="extra-fields"></a></p>
<h2 id="extra-data">额外数据<a class="headerlink" href="#extra-data" title="Permanent link">&para;</a></h2>
<p>默认情况下，Pydantic 模型<strong>在您提供额外数据时不会报错</strong>，这些值将被简单地忽略：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</code></pre></div>
<p>可以使用 <a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.extra"><code>extra</code></a> 配置值来控制此行为：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s1">&#39;allow&#39;</span><span class="p">)</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>  <span class="c1"># (1)!</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
<span class="k">assert</span> <span class="n">m</span><span class="o">.</span><span class="n">__pydantic_extra__</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">}</span>
</code></pre></div>
<ol>
<li>如果 <a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.extra"><code>extra</code></a> 设置为 <code>'forbid'</code>，这将失败。</li>
</ol>
<p>配置可以取三个值：</p>
<ul>
<li><code>'ignore'</code>: 忽略提供的额外数据（默认值）。</li>
<li><code>'forbid'</code>: 不允许提供额外数据。</li>
<li><code>'allow'</code>: 允许提供额外数据并存储在 <code>__pydantic_extra__</code> 字典属性中。
  <code>__pydantic_extra__</code> 可以显式注解以提供对额外字段的验证。</li>
</ul>
<p>验证方法（例如 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate()</code></a>）有一个可选的 <code>extra</code> 参数，
该参数将覆盖该验证调用的模型的 <code>extra</code> 配置值。</p>
<p>有关更多详细信息，请参阅 <a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.extra"><code>extra</code></a> API 文档。</p>
<p>Pydantic 数据类也支持额外数据（请参阅 <a href="../dataclasses/#dataclass-config">数据类配置</a> 部分）。</p>
<h2 id="nested-models">嵌套模型<a class="headerlink" href="#nested-models" title="Permanent link">&para;</a></h2>
<p>可以使用模型本身作为注解中的类型来定义更复杂的层次数据结构。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python 3.9 and above</label><label for="__tabbed_1_2">Python 3.10 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">apple</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span>
    <span class="n">banana</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Spam</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="n">Foo</span>
    <span class="n">bars</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Bar</span><span class="p">]</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Spam</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="n">bars</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;x1&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;x2&#39;</span><span class="p">}])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">foo=Foo(count=4, size=None) bars=[Bar(apple=&#39;x1&#39;, banana=&#39;y&#39;), Bar(apple=&#39;x2&#39;, banana=&#39;y&#39;)]</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;foo&#39;: {&#39;count&#39;: 4, &#39;size&#39;: None},</span>
<span class="sd">    &#39;bars&#39;: [{&#39;apple&#39;: &#39;x1&#39;, &#39;banana&#39;: &#39;y&#39;}, {&#39;apple&#39;: &#39;x2&#39;, &#39;banana&#39;: &#39;y&#39;}],</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">apple</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span>
    <span class="n">banana</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Spam</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="n">Foo</span>
    <span class="n">bars</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Bar</span><span class="p">]</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Spam</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span> <span class="n">bars</span><span class="o">=</span><span class="p">[{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;x1&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;x2&#39;</span><span class="p">}])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">foo=Foo(count=4, size=None) bars=[Bar(apple=&#39;x1&#39;, banana=&#39;y&#39;), Bar(apple=&#39;x2&#39;, banana=&#39;y&#39;)]</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;foo&#39;: {&#39;count&#39;: 4, &#39;size&#39;: None},</span>
<span class="sd">    &#39;bars&#39;: [{&#39;apple&#39;: &#39;x1&#39;, &#39;banana&#39;: &#39;y&#39;}, {&#39;apple&#39;: &#39;x2&#39;, &#39;banana&#39;: &#39;y&#39;}],</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p>支持自引用模型。有关更多详细信息，请参阅相关的
<a href="../forward_annotations/#self-referencing-or-recursive-models">前向注解</a> 文档。</p>
<h2 id="rebuilding-model-schema">重建模型模式<a class="headerlink" href="#rebuilding-model-schema" title="Permanent link">&para;</a></h2>
<p>当您在代码中定义模型类时，Pydantic 将分析类的主体以收集执行验证和序列化所需的各种信息，
这些信息收集在一个核心模式中。值得注意的是，模型类型注解会被评估以
了解每个字段的有效类型（更多信息可以在 <a href="../../internals/architecture/">架构</a> 文档中找到）。
但是，注解可能引用在模型类创建时未定义的符号。
为了解决这个问题，可以使用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a> 方法：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">PydanticUserError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;Bar&#39;</span>  <span class="c1"># (1)!</span>


<span class="k">try</span><span class="p">:</span>
    <span class="n">Foo</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">()</span>
<span class="k">except</span> <span class="n">PydanticUserError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    `Foo` is not fully defined; you should define `Bar`, then call `Foo.model_rebuild()`.</span>

<span class="sd">    For further information visit https://errors.pydantic.dev/2/u/class-not-fully-defined</span>
<span class="sd">    &quot;&quot;&quot;</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">Foo</span><span class="o">.</span><span class="n">model_rebuild</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Foo</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;$defs&#39;: {&#39;Bar&#39;: {&#39;properties&#39;: {}, &#39;title&#39;: &#39;Bar&#39;, &#39;type&#39;: &#39;object&#39;}},</span>
<span class="sd">    &#39;properties&#39;: {&#39;x&#39;: {&#39;$ref&#39;: &#39;#/$defs/Bar&#39;}},</span>
<span class="sd">    &#39;required&#39;: [&#39;x&#39;],</span>
<span class="sd">    &#39;title&#39;: &#39;Foo&#39;,</span>
<span class="sd">    &#39;type&#39;: &#39;object&#39;,</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<ol>
<li>在创建 <code>Foo</code> 类时，<code>Bar</code> 尚未定义。因此，
    使用了 <a href="../forward_annotations/">前向注解</a>。</li>
</ol>
<p>Pydantic 会尝试自动确定何时需要这样做，如果未完成则会报错，但您可能希望在处理递归模型或泛型时
主动调用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a>。</p>
<p>在 V2 中，<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a> 取代了 V1 中的 <code>update_forward_refs()</code>。新行为有一些细微差异。
最大的变化是，当在最外层模型上调用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a> 时，它会构建一个用于验证整个模型
（包括嵌套模型）的核心模式，因此在调用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_rebuild"><code>model_rebuild()</code></a> 之前，所有级别的所有类型都需要准备就绪。</p>
<h2 id="_2">任意类实例<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>（以前称为"ORM 模式"/<code>from_orm</code>）。</p>
<p>Pydantic 模型也可以通过读取与模型字段名称对应的实例属性来从任意类实例创建。
此功能的一个常见应用是与对象关系映射（ORMs）集成。</p>
<p>为此，将 <a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.from_attributes"><code>from_attributes</code></a> 配置值设置为 <code>True</code>
（有关更多详细信息，请参阅 <a href="../config/">配置</a> 文档）。</p>
<p>此处的示例使用 <a href="https://www.sqlalchemy.org/">SQLAlchemy</a>，但相同的方法应适用于任何 ORM。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy</span><span class="w"> </span><span class="kn">import</span> <span class="n">ARRAY</span><span class="p">,</span> <span class="n">String</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sqlalchemy.orm</span><span class="w"> </span><span class="kn">import</span> <span class="n">DeclarativeBase</span><span class="p">,</span> <span class="n">Mapped</span><span class="p">,</span> <span class="n">mapped_column</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">StringConstraints</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Base</span><span class="p">(</span><span class="n">DeclarativeBase</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span><span class="w"> </span><span class="nc">CompanyOrm</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">&#39;companies&#39;</span>

    <span class="nb">id</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">public_key</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span>
        <span class="n">String</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">domains</span><span class="p">:</span> <span class="n">Mapped</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">mapped_column</span><span class="p">(</span><span class="n">ARRAY</span><span class="p">(</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">)))</span>


<span class="k">class</span><span class="w"> </span><span class="nc">CompanyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">from_attributes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">public_key</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StringConstraints</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)]</span>
    <span class="n">domains</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">StringConstraints</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)]]</span>


<span class="n">co_orm</span> <span class="o">=</span> <span class="n">CompanyOrm</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
    <span class="n">public_key</span><span class="o">=</span><span class="s1">&#39;foobar&#39;</span><span class="p">,</span>
    <span class="n">domains</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;foobar.com&#39;</span><span class="p">],</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">co_orm</span><span class="p">)</span>
<span class="c1">#&gt; &lt;__main__.CompanyOrm object at 0x0123456789ab&gt;</span>
<span class="n">co_model</span> <span class="o">=</span> <span class="n">CompanyModel</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">co_orm</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">co_model</span><span class="p">)</span>
<span class="c1">#&gt; id=123 public_key=&#39;foobar&#39; domains=[&#39;example.com&#39;, &#39;foobar.com&#39;]</span>
</code></pre></div>
<h3 id="_3">嵌套属性<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>当使用属性解析模型时，模型实例将从顶级属性和更深层次的嵌套属性（如适用）创建。</p>
<p>以下是一个演示该原理的示例：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span>


<span class="k">class</span><span class="w"> </span><span class="nc">PetCls</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">species</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">species</span> <span class="o">=</span> <span class="n">species</span>


<span class="k">class</span><span class="w"> </span><span class="nc">PersonCls</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">pets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">PetCls</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pets</span> <span class="o">=</span> <span class="n">pets</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Pet</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">from_attributes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">species</span><span class="p">:</span> <span class="nb">str</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Person</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">from_attributes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">pets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Pet</span><span class="p">]</span>


<span class="n">bones</span> <span class="o">=</span> <span class="n">PetCls</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Bones&#39;</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="s1">&#39;dog&#39;</span><span class="p">)</span>
<span class="n">orion</span> <span class="o">=</span> <span class="n">PetCls</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Orion&#39;</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="s1">&#39;cat&#39;</span><span class="p">)</span>
<span class="n">anna</span> <span class="o">=</span> <span class="n">PersonCls</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Anna&#39;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">pets</span><span class="o">=</span><span class="p">[</span><span class="n">bones</span><span class="p">,</span> <span class="n">orion</span><span class="p">])</span>
<span class="n">anna_model</span> <span class="o">=</span> <span class="n">Person</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">anna</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">anna_model</span><span class="p">)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">name=&#39;Anna&#39; age=20.0 pets=[Pet(name=&#39;Bones&#39;, species=&#39;dog&#39;), Pet(name=&#39;Orion&#39;, species=&#39;cat&#39;)]</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<h2 id="error-handling">错误处理<a class="headerlink" href="#error-handling" title="Permanent link">&para;</a></h2>
<p>每当 Pydantic 在验证的数据中发现错误时，它将引发 <a class="autorefs autorefs-internal" href="../../api/pydantic_core/#pydantic_core.ValidationError"><code>ValidationError</code></a> 异常。</p>
<p>无论发现多少错误，都会引发单个异常，并且该验证错误
将包含所有错误的信息以及它们是如何发生的。</p>
<p>有关标准和自定义错误的详细信息，请参阅 <a href="../../errors/errors/">错误处理</a>。</p>
<p>作为演示：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">list_of_ints</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">a_float</span><span class="p">:</span> <span class="nb">float</span>


<span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">list_of_ints</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;bad&#39;</span><span class="p">],</span>
    <span class="n">a_float</span><span class="o">=</span><span class="s1">&#39;not a float&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for Model</span>
<span class="sd">    list_of_ints.2</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;bad&#39;, input_type=str]</span>
<span class="sd">    a_float</span>
<span class="sd">      Input should be a valid number, unable to parse string as a number [type=float_parsing, input_value=&#39;not a float&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<h2 id="validating-data">验证数据<a class="headerlink" href="#validating-data" title="Permanent link">&para;</a></h2>
<p>Pydantic 在模型类上提供了三种解析数据的方法：</p>
<ul>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate()</code></a>: 这与模型的 <code>__init__</code> 方法非常相似，
  不同之处在于它接受字典或对象而不是关键字参数。如果传递的对象无法验证，
  或者它不是字典或相关模型的实例，将引发 <a class="autorefs autorefs-internal" href="../../api/pydantic_core/#pydantic_core.ValidationError"><code>ValidationError</code></a>。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json"><code>model_validate_json()</code></a>: 这将提供的数据作为 JSON 字符串或 <code>bytes</code> 对象进行验证。
  如果您的传入数据是 JSON 负载，这通常被认为更快（而不是手动将数据解析为字典）。
  在文档的 <a href="../json/">JSON</a> 部分了解更多关于 JSON 解析的信息。</li>
<li><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_strings"><code>model_validate_strings()</code></a>: 这接受一个具有字符串键和值的字典（可以是嵌套的），并在 JSON 模式下验证数据，以便将所述字符串强制转换为正确的类型。</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Python 3.9 and above</label><label for="__tabbed_2_2">Python 3.10 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;John Doe&#39;</span>
    <span class="n">signup_ts</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;not&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;dict&#39;</span><span class="p">])</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">      Input should be a valid dictionary or instance of User [type=model_type, input_value=[&#39;not&#39;, &#39;a&#39;, &#39;dict&#39;], input_type=list]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;{&quot;id&quot;: 123, &quot;name&quot;: &quot;James&quot;}&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;{&quot;id&quot;: 123, &quot;name&quot;: 123}&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">    name</span>
<span class="sd">      Input should be a valid string [type=string_type, input_value=123, input_type=int]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;invalid JSON&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">      Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value=&#39;invalid JSON&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="s1">&#39;signup_ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-04-01T12:00:00&#39;</span><span class="p">}</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=datetime.datetime(2024, 4, 1, 12, 0)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">(</span>
        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="s1">&#39;signup_ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-04-01&#39;</span><span class="p">},</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">    signup_ts</span>
<span class="sd">      Input should be a valid datetime, invalid datetime separator, expected `T`, `t`, `_` or space [type=datetime_parsing, input_value=&#39;2024-04-01&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">User</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;John Doe&#39;</span>
    <span class="n">signup_ts</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">User</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;not&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;dict&#39;</span><span class="p">])</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">      Input should be a valid dictionary or instance of User [type=model_type, input_value=[&#39;not&#39;, &#39;a&#39;, &#39;dict&#39;], input_type=list]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;{&quot;id&quot;: 123, &quot;name&quot;: &quot;James&quot;}&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;{&quot;id&quot;: 123, &quot;name&quot;: 123}&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">    name</span>
<span class="sd">      Input should be a valid string [type=string_type, input_value=123, input_type=int]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="s1">&#39;invalid JSON&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">      Invalid JSON: expected value at line 1 column 1 [type=json_invalid, input_value=&#39;invalid JSON&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">({</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=None</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="s1">&#39;signup_ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-04-01T12:00:00&#39;</span><span class="p">}</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; id=123 name=&#39;James&#39; signup_ts=datetime.datetime(2024, 4, 1, 12, 0)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">model_validate_strings</span><span class="p">(</span>
        <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;123&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;James&#39;</span><span class="p">,</span> <span class="s1">&#39;signup_ts&#39;</span><span class="p">:</span> <span class="s1">&#39;2024-04-01&#39;</span><span class="p">},</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for User</span>
<span class="sd">    signup_ts</span>
<span class="sd">      Input should be a valid datetime, invalid datetime separator, expected `T`, `t`, `_` or space [type=datetime_parsing, input_value=&#39;2024-04-01&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
<p>如果您想要验证非 JSON 格式的序列化数据，您应该自己将数据加载到字典中，
然后将其传递给 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate</code></a>。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>根据所涉及的类型和模型配置，<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate</code></a>
和 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json"><code>model_validate_json</code></a> 可能具有不同的验证行为。
如果您有来自非 JSON 源的数据，但想要获得与 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_json"><code>model_validate_json</code></a> 相同的验证
行为和错误，我们目前的建议是使用 <code>model_validate_json(json.dumps(data))</code>，或者如果数据采用具有字符串键和值的（可能是嵌套的）字典形式，则使用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate_strings"><code>model_validate_strings</code></a>。</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>如果您将模型实例传递给 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate</code></a>，您需要考虑在模型配置中设置
<a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.revalidate_instances"><code>revalidate_instances</code></a>。
如果您不设置此值，则将在模型实例上跳过验证。请参阅以下示例：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1"><img alt="❌" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/274c.svg" title=":x:" /> <code>revalidate_instances='never'</code></label><label for="__tabbed_3_2"><img alt="✅" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/2705.svg" title=":white_check_mark:" /> <code>revalidate_instances='always'</code></label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># note: setting `validate_assignment` to `True` in the config can prevent this kind of misbehavior.</span>
<span class="n">m</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;not an int&#39;</span>

<span class="c1"># doesn&#39;t raise a validation error even though m is invalid</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">revalidate_instances</span><span class="o">=</span><span class="s1">&#39;always&#39;</span><span class="p">)</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># note: setting `validate_assignment` to `True` in the config can prevent this kind of misbehavior.</span>
<span class="n">m</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;not an int&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">m2</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Model</span>
<span class="sd">    a</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;not an int&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
</div>
</div>
</div>
</div>
<h3 id="creating-models-without-validation">创建模型而不进行验证<a class="headerlink" href="#creating-models-without-validation" title="Permanent link">&para;</a></h3>
<p>Pydantic 还提供了 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a> 方法，该方法允许<strong>不进行验证</strong>创建模型。
这在至少以下几种情况下很有用：</p>
<ul>
<li>当处理已知有效的复杂数据时（出于性能原因）</li>
<li>当一个或多个验证器函数不是幂等时</li>
<li>当一个或多个验证器函数具有您不希望触发的副作用时</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a> 不进行任何验证，这意味着它可以创建
无效的模型。<strong>您应该只对已经验证过的数据或您绝对信任的数据使用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>
方法。</strong></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>在 Pydantic V2 中，验证（无论是直接实例化还是使用 <code>model_validate*</code> 方法）与
<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a> 之间的性能差距已经大大缩小。
对于简单模型，使用验证甚至可能更快。如果您出于性能原因使用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>，
您可能需要在假设它实际上更快之前对您的用例进行分析。</p>
</div>
<p>请注意，对于<a href="#rootmodel-and-custom-root-types">根模型</a>，根值可以位置传递给
<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a>，而不是使用关键字参数。</p>
<p>以下是关于 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a> 行为的一些额外说明：</p>
<ul>
<li>当我们说"不执行验证"时——这包括将字典转换为模型实例。因此，如果您有一个字段
  引用模型类型，您需要自己将内部字典转换为模型。</li>
<li>如果您不为具有默认值的字段传递关键字参数，仍将使用默认值。</li>
<li>对于具有私有属性的模型，<code>__pydantic_private__</code> 字典将以与创建模型时相同的方式填充
  验证。</li>
<li>不会调用模型或其任何父类的 <code>__init__</code> 方法，即使定义了自定义 <code>__init__</code> 方法。</li>
</ul>
<div class="admonition note">
<p class="admonition-title">关于 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a> 的<a href="#extra-data">额外数据</a>行为</p>
<ul>
<li>对于将 <a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.extra"><code>extra</code></a> 设置为 <code>'allow'</code> 的模型，不对应于字段的数据将正确存储在
<code>__pydantic_extra__</code> 字典中并保存到模型的 <code>__dict__</code> 属性中。</li>
<li>对于将 <a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.extra"><code>extra</code></a> 设置为 <code>'ignore'</code> 的模型，不对应于字段的数据将被忽略——也就是说，
不会存储在实例的 <code>__pydantic_extra__</code> 或 <code>__dict__</code> 中。</li>
<li>与通过验证实例化模型不同，当 <a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.extra"><code>extra</code></a> 设置为 <code>'forbid'</code> 时调用 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_construct"><code>model_construct()</code></a> 不会在存在不对应于字段的数据时引发错误。相反，所述输入数据将被简单地忽略。</li>
</ul>
</div>
<h2 id="model-copy">模型复制<a class="headerlink" href="#model-copy" title="Permanent link">&para;</a></h2>
<details class="api">
<summary>API 文档</summary>
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_copy"><code>pydantic.main.BaseModel.model_copy</code></a><br></p>
</details>
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_copy"><code>model_copy()</code></a> 方法允许复制模型（带有可选更新），
这在处理冻结模型时特别有用。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">BarModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">whatever</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span><span class="w"> </span><span class="nc">FooBarModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">banana</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="n">BarModel</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">FooBarModel</span><span class="p">(</span><span class="n">banana</span><span class="o">=</span><span class="mf">3.14</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;whatever&#39;</span><span class="p">:</span> <span class="mi">123</span><span class="p">})</span>

<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">model_copy</span><span class="p">(</span><span class="n">update</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;banana&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}))</span>
<span class="c1">#&gt; banana=0 foo=&#39;hello&#39; bar=BarModel(whatever=123)</span>

<span class="c1"># 正常复制为 bar 提供相同的对象引用：</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">model_copy</span><span class="p">()</span><span class="o">.</span><span class="n">bar</span><span class="p">))</span>
<span class="c1">#&gt; True</span>
<span class="c1"># 深度复制为 `bar` 提供新的对象引用：</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">model_copy</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">bar</span><span class="p">))</span>
<span class="c1">#&gt; False</span>
</code></pre></div>
<h2 id="generic-models">泛型模型<a class="headerlink" href="#generic-models" title="Permanent link">&para;</a></h2>
<p>Pydantic 支持创建泛型模型，以便更轻松地重用通用模型结构。新的
<a class="autorefs autorefs-external" href="https://docs.python.org/3/reference/compound_stmts.html#type-params">类型参数语法</a>（由 Python 3.12 中的 <a href="https://peps.python.org/pep-0695/">PEP 695</a> 引入）
和旧语法都受支持（有关更多详细信息，请参阅
<a href="https://docs.python.org/3/library/typing.html#building-generic-types-and-type-aliases">Python 文档</a>）。</p>
<p>以下是一个使用泛型 Pydantic 模型创建易于重用的 HTTP 响应负载包装器的示例：</p>
<!-- TODO: tabs should be auto-generated if using Ruff (https://github.com/pydantic/pydantic/issues/10083) -->

<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Python 3.9 及以上版本</label><label for="__tabbed_4_2">Python 3.12 及以上版本（新语法）</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">DataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;DataT&#39;</span><span class="p">)</span>  <span class="c1"># (1)!</span>


<span class="k">class</span><span class="w"> </span><span class="nc">DataModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">number</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Response</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">DataT</span><span class="p">]):</span>  <span class="c1"># (2)!</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">DataT</span>  <span class="c1"># (3)!</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; data=1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
<span class="c1">#&gt; data=&#39;value&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;data&#39;: &#39;value&#39;}</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">DataModel</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="n">DataModel</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;data&#39;: {&#39;number&#39;: 1}}</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Response</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Response[int]</span>
<span class="sd">    data</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;value&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<ol>
<li>声明一个或多个<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/typing.html#typing.TypeVar">类型变量</a>以用于参数化您的模型。</li>
<li>声明一个继承自 <a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel"><code>BaseModel</code></a> 和 <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/typing.html#typing.Generic"><code>typing.Generic</code></a>
   （按此特定顺序）的 Pydantic 模型，并将您之前声明的类型变量列表作为参数添加到
   <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/typing.html#typing.Generic"><code>Generic</code></a> 父类。</li>
<li>在您希望用其他类型替换的地方使用类型变量作为注解。</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">DataModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">number</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Response</span><span class="p">[</span><span class="n">DataT</span><span class="p">](</span><span class="n">BaseModel</span><span class="p">):</span>  <span class="c1"># (1)!</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">DataT</span>  <span class="c1"># (2)!</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; data=1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
<span class="c1">#&gt; data=&#39;value&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;data&#39;: &#39;value&#39;}</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">DataModel</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="n">DataModel</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;data&#39;: {&#39;number&#39;: 1}}</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Response</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for Response[int]</span>
<span class="sd">    data</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;value&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<ol>
<li>声明一个 Pydantic 模型并将类型变量列表添加为类型参数。</li>
<li>在您希望用其他类型替换的地方使用类型变量作为注解。</li>
</ol>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>当使用具体类型参数化模型时，如果类型变量有上界，Pydantic <strong>不会</strong>验证提供的类型
是否<a href="https://typing.readthedocs.io/en/latest/spec/generics.html#type-variables-with-an-upper-bound">可分配给类型变量</a>。</p>
</div>
<p>在泛型模型上设置的任何<a href="../config/">配置</a>、<a href="../validators/">验证</a>或<a href="../serialization/">序列化</a>逻辑
也将应用于参数化类，就像从模型类继承时一样。任何自定义方法或属性也将被继承。</p>
<p>泛型模型还与类型检查器正确集成，因此您将获得所有类型检查
就像您为每个参数化声明一个不同的类型一样。</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>在内部，当泛型模型类被参数化时，Pydantic 在运行时创建泛型模型的子类。
这些类被缓存，因此使用泛型模型引入的开销应该是最小的。</p>
</div>
<p>要从泛型模型继承并保持其泛型特性，子类还必须继承自
<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/typing.html#typing.Generic"><code>Generic</code></a>：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">TypeX</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeX&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">BaseClass</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TypeX</span><span class="p">]):</span>
    <span class="n">X</span><span class="p">:</span> <span class="n">TypeX</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ChildClass</span><span class="p">(</span><span class="n">BaseClass</span><span class="p">[</span><span class="n">TypeX</span><span class="p">],</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TypeX</span><span class="p">]):</span>
    <span class="k">pass</span>


<span class="c1"># Parametrize `TypeX` with `int`:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ChildClass</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">X</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="c1">#&gt; X=1</span>
</code></pre></div>
<p>您还可以创建一个泛型子类，部分或完全替换超类中的类型变量：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">TypeX</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeX&#39;</span><span class="p">)</span>
<span class="n">TypeY</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeY&#39;</span><span class="p">)</span>
<span class="n">TypeZ</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeZ&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">BaseClass</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TypeX</span><span class="p">,</span> <span class="n">TypeY</span><span class="p">]):</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">TypeX</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">TypeY</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ChildClass</span><span class="p">(</span><span class="n">BaseClass</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">TypeY</span><span class="p">],</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TypeY</span><span class="p">,</span> <span class="n">TypeZ</span><span class="p">]):</span>
    <span class="n">z</span><span class="p">:</span> <span class="n">TypeZ</span>


<span class="c1"># Parametrize `TypeY` with `str`:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ChildClass</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">](</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="s1">&#39;3&#39;</span><span class="p">))</span>
<span class="c1">#&gt; x=1 y=&#39;y&#39; z=3</span>
</code></pre></div>
<p>如果具体子类的名称很重要，您还可以通过重写<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_parametrized_name"><code>model_parametrized_name()</code></a>方法来覆盖默认的名称生成：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">DataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;DataT&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Response</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">DataT</span><span class="p">]):</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">DataT</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">model_parametrized_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="o">...</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">params</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s1">Response&#39;</span>


<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="mi">1</span><span class="p">)))</span>
<span class="c1">#&gt; IntResponse(data=1)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">Response</span><span class="p">[</span><span class="nb">str</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)))</span>
<span class="c1">#&gt; StrResponse(data=&#39;a&#39;)</span>
</code></pre></div>
<p>您可以在其他模型中使用参数化泛型模型作为类型：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ResponseModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">content</span><span class="p">:</span> <span class="n">T</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Product</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">price</span><span class="p">:</span> <span class="nb">float</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Order</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">product</span><span class="p">:</span> <span class="n">ResponseModel</span><span class="p">[</span><span class="n">Product</span><span class="p">]</span>


<span class="n">product</span> <span class="o">=</span> <span class="n">Product</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">ResponseModel</span><span class="p">[</span><span class="n">Product</span><span class="p">](</span><span class="n">content</span><span class="o">=</span><span class="n">product</span><span class="p">)</span>
<span class="n">order</span> <span class="o">=</span> <span class="n">Order</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">order</span><span class="p">))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Order(id=1, product=ResponseModel[Product](content=Product(name=&#39;Apple&#39;, price=0.5)))</span>
<span class="sd">&quot;&quot;&quot;</span>
</code></pre></div>
<p>在嵌套模型中使用相同的类型变量允许您在模型的不同点强制执行类型关系：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">InnerT</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">inner</span><span class="p">:</span> <span class="n">T</span>


<span class="k">class</span><span class="w"> </span><span class="nc">OuterT</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">outer</span><span class="p">:</span> <span class="n">T</span>
    <span class="n">nested</span><span class="p">:</span> <span class="n">InnerT</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>


<span class="n">nested</span> <span class="o">=</span> <span class="n">InnerT</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">inner</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">OuterT</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">outer</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="n">nested</span><span class="p">))</span>
<span class="c1">#&gt; outer=1 nested=InnerT[int](inner=1)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">OuterT</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">outer</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">nested</span><span class="o">=</span><span class="n">InnerT</span><span class="p">(</span><span class="n">inner</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)))</span>  <span class="c1"># (1)!</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for OuterT[int]</span>
<span class="sd">    outer</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    nested.inner</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;a&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<ol>
<li><code>OuterT</code> 模型使用 <code>int</code> 参数化，但在验证期间与 <code>T</code> 注解关联的数据类型为 <code>str</code>，导致验证错误。</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>虽然可能不会引发错误，但我们强烈建议不要在 <a href="https://docs.python.org/3/library/functions.html#isinstance"><code>isinstance()</code></a> 检查中使用参数化泛型。</p>
<p>例如，您不应该执行 <code>isinstance(my_model, MyGenericModel[int])</code>。但是，执行 <code>isinstance(my_model, MyGenericModel)</code> 是可以的（请注意，对于标准泛型，使用参数化泛型类进行子类检查会引发错误）。</p>
<p>如果您需要对参数化泛型执行 <a href="https://docs.python.org/3/library/functions.html#isinstance"><code>isinstance()</code></a> 检查，可以通过子类化参数化泛型类来实现：</p>
<div class="language-python highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">MyIntModel</span><span class="p">(</span><span class="n">MyGenericModel</span><span class="p">[</span><span class="nb">int</span><span class="p">]):</span> <span class="o">...</span>

<span class="nb">isinstance</span><span class="p">(</span><span class="n">my_model</span><span class="p">,</span> <span class="n">MyIntModel</span><span class="p">)</span>
</code></pre></div>
</div>
<details class="note">
<summary>实现细节</summary>
<p>当使用嵌套泛型模型时，Pydantic有时会执行重新验证，以产生最直观的验证结果。
具体来说，如果您有一个类型为 <code>GenericModel[SomeType]</code> 的字段，并且您针对此字段验证像 <code>GenericModel[SomeCompatibleType]</code> 这样的数据，
我们将检查数据，识别输入数据是 <code>GenericModel</code> 的一种"松散"子类，并重新验证包含的 <code>SomeCompatibleType</code> 数据。</p>
<p>这会增加一些验证开销，但对于如下所示的情况，它使事情更加直观。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">GenericModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">a</span><span class="p">:</span> <span class="n">T</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">inner</span><span class="p">:</span> <span class="n">GenericModel</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>


<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">Model</span><span class="p">(</span><span class="n">inner</span><span class="o">=</span><span class="n">GenericModel</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)))))</span>
<span class="c1">#&gt; Model(inner=GenericModel[Any](a=1))</span>
</code></pre></div>
<p>请注意，如果您针对 <code>GenericModel[int]</code> 进行验证并传入一个 <code>GenericModel[str](a='not an int')</code> 实例，验证仍然会失败。</p>
<p>还值得注意的是，这种模式也会重新触发任何自定义验证，比如额外的模型验证器等。
验证器将在第一次传递时被调用一次，直接针对 <code>GenericModel[Any]</code> 进行验证。该验证失败，因为 <code>GenericModel[int]</code> 不是 <code>GenericModel[Any]</code> 的子类。这与上面关于在 <code>isinstance()</code> 和 <code>issubclass()</code> 检查中使用参数化泛型的复杂性的警告有关。
然后，验证器将在第二次传递时再次被调用，在更宽松的强制重新验证阶段，这会成功。
为了更好地理解这个后果，请参见下面：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">Self</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">model_validator</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">GenericModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">a</span><span class="p">:</span> <span class="n">T</span>

    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;after&#39;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">validate_after</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;after validator running custom validation...&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">inner</span><span class="p">:</span> <span class="n">GenericModel</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">Model</span><span class="p">(</span><span class="n">inner</span><span class="o">=</span><span class="n">GenericModel</span><span class="p">[</span><span class="nb">int</span><span class="p">](</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)))</span>
<span class="c1">#&gt; after validator running custom validation...</span>
<span class="c1">#&gt; after validator running custom validation...</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">m</span><span class="p">))</span>
<span class="c1">#&gt; Model(inner=GenericModel[Any](a=1))</span>
</code></pre></div>
</details>
<h3 id="_4">未参数化类型变量的验证<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>当类型变量未被参数化时，Pydantic 处理泛型模型的方式类似于处理内置泛型类型如 <a class="autorefs autorefs-external" href="https://docs.python.org/3/glossary.html#term-list"><code>list</code></a> 和 <a class="autorefs autorefs-external" href="https://docs.python.org/3/reference/expressions.html#dict"><code>dict</code></a>：</p>
<ul>
<li>如果类型变量<a href="https://typing.readthedocs.io/en/latest/reference/generics.html#type-variables-with-upper-bounds">绑定</a>
  或<a href="https://typing.readthedocs.io/en/latest/reference/generics.html#type-variables-with-constraints">约束</a>到特定类型，
  将使用该类型。</li>
<li>如果类型变量有默认类型（根据 <a href="https://peps.python.org/pep-0696/">PEP 696</a> 指定），将使用该默认类型。</li>
<li>对于未绑定或未约束的类型变量，Pydantic 将回退到 <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/typing.html#typing.Any"><code>Any</code></a>。</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
<span class="n">U</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">V</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;V&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">V</span><span class="p">]):</span>
    <span class="n">t</span><span class="p">:</span> <span class="n">T</span>
    <span class="n">u</span><span class="p">:</span> <span class="n">U</span>
    <span class="n">v</span><span class="p">:</span> <span class="n">V</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="s1">&#39;v&#39;</span><span class="p">))</span>
<span class="c1">#&gt; t=&#39;t&#39; u=1 v=&#39;v&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="n">u</span><span class="o">=</span><span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    2 validation errors for Model</span>
<span class="sd">    u</span>
<span class="sd">      Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value=&#39;u&#39;, input_type=str]</span>
<span class="sd">    v</span>
<span class="sd">      Input should be a valid string [type=string_type, input_value=1, input_type=int]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>在某些情况下，针对未参数化泛型模型的验证可能导致数据丢失。具体来说，如果使用了类型变量上界、约束或默认值的子类型，并且模型没有显式参数化，结果类型<strong>将不是</strong>提供的类型：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">ItemT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;ItemT&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="s1">&#39;ItemBase&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ItemBase</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span> <span class="o">...</span>


<span class="k">class</span><span class="w"> </span><span class="nc">IntItem</span><span class="p">(</span><span class="n">ItemBase</span><span class="p">):</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ItemHolder</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ItemT</span><span class="p">]):</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">ItemT</span>


<span class="n">loaded_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;item&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>


<span class="nb">print</span><span class="p">(</span><span class="n">ItemHolder</span><span class="p">(</span><span class="o">**</span><span class="n">loaded_data</span><span class="p">))</span>  <span class="c1"># (1)!</span>
<span class="c1">#&gt; item=ItemBase()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">ItemHolder</span><span class="p">[</span><span class="n">IntItem</span><span class="p">](</span><span class="o">**</span><span class="n">loaded_data</span><span class="p">))</span>  <span class="c1"># (2)!</span>
<span class="c1">#&gt; item=IntItem(value=1)</span>
</code></pre></div>
<ol>
<li>当泛型未被参数化时，输入数据针对 <code>ItemT</code> 上界进行验证。
   由于 <code>ItemBase</code> 没有字段，<code>item</code> 字段信息丢失。</li>
<li>在这种情况下，类型变量被显式参数化，因此输入数据针对 <code>IntItem</code> 类进行验证。</li>
</ol>
</div>
<h3 id="_5">未参数化类型变量的序列化<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>当使用带有<a href="https://typing.readthedocs.io/en/latest/reference/generics.html#type-variables-with-upper-bounds">上界</a>、<a href="https://typing.readthedocs.io/en/latest/reference/generics.html#type-variables-with-constraints">约束</a>或默认值的类型变量时，序列化行为会有所不同：</p>
<p>如果Pydantic模型被用作类型变量的上界，并且该类型变量从未被参数化，那么Pydantic将使用上界进行验证，但在序列化方面将该值视为<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/typing.html#typing.Any"><code>Any</code></a>：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ErrorDetails</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">ErrorDataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;ErrorDataT&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">ErrorDetails</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Error</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]):</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">ErrorDataT</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyErrorDetails</span><span class="p">(</span><span class="n">ErrorDetails</span><span class="p">):</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span>


<span class="c1"># serialized as Any</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">Error</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">MyErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;var2&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="s1">&#39;var2&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="c1"># serialized using the concrete parametrization</span>
<span class="c1"># note that `&#39;bar&#39;: &#39;var2&#39;` is missing</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">Error</span><span class="p">[</span><span class="n">ErrorDetails</span><span class="p">](</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">ErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
<p>这是上述行为的另一个示例，枚举了关于绑定规范和泛型类型参数化的所有排列：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="n">TBound</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TBound&#39;</span><span class="p">,</span> <span class="n">bound</span><span class="o">=</span><span class="n">BaseModel</span><span class="p">)</span>
<span class="n">TNoBound</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TNoBound&#39;</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">IntValue</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">int</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ItemBound</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TBound</span><span class="p">]):</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">TBound</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ItemNoBound</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">TNoBound</span><span class="p">]):</span>
    <span class="n">item</span><span class="p">:</span> <span class="n">TNoBound</span>


<span class="n">item_bound_inferred</span> <span class="o">=</span> <span class="n">ItemBound</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">IntValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="n">item_bound_explicit</span> <span class="o">=</span> <span class="n">ItemBound</span><span class="p">[</span><span class="n">IntValue</span><span class="p">](</span><span class="n">item</span><span class="o">=</span><span class="n">IntValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="n">item_no_bound_inferred</span> <span class="o">=</span> <span class="n">ItemNoBound</span><span class="p">(</span><span class="n">item</span><span class="o">=</span><span class="n">IntValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>
<span class="n">item_no_bound_explicit</span> <span class="o">=</span> <span class="n">ItemNoBound</span><span class="p">[</span><span class="n">IntValue</span><span class="p">](</span><span class="n">item</span><span class="o">=</span><span class="n">IntValue</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>

<span class="c1"># calling `print(x.model_dump())` on any of the above instances results in the following:</span>
<span class="c1">#&gt; {&#39;item&#39;: {&#39;value&#39;: 3}}</span>
</code></pre></div>
<p>但是，如果使用了<a href="https://typing.readthedocs.io/en/latest/reference/generics.html#type-variables-with-constraints">约束</a>
或默认值（根据<a href="https://peps.python.org/pep-0696/">PEP 696</a>），那么如果类型变量未被参数化，将使用默认类型或约束
进行验证和序列化。您可以使用<a href="../serialization/#serializeasany-annotation"><code>SerializeAsAny</code></a>来覆盖此行为：</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Python 3.9 and above</label><label for="__tabbed_5_2">Python 3.13 and above</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">SerializeAsAny</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ErrorDetails</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">ErrorDataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;ErrorDataT&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">ErrorDetails</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Error</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]):</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">ErrorDataT</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyErrorDetails</span><span class="p">(</span><span class="n">ErrorDetails</span><span class="p">):</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span>


<span class="c1"># serialized using the default&#39;s serializer</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">Error</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">MyErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;var2&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="c1"># If `ErrorDataT` was using an upper bound, `bar` would be present in `details`.</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SerializeAsAnyError</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]):</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">SerializeAsAny</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]</span>


<span class="c1"># serialized as Any</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">SerializeAsAnyError</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">MyErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;baz&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypeVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">SerializeAsAny</span>


<span class="k">class</span><span class="w"> </span><span class="nc">ErrorDetails</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">ErrorDataT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;ErrorDataT&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">ErrorDetails</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Error</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]):</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">ErrorDataT</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyErrorDetails</span><span class="p">(</span><span class="n">ErrorDetails</span><span class="p">):</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span>


<span class="c1"># serialized using the default&#39;s serializer</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">Error</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">MyErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;var2&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="c1"># If `ErrorDataT` was using an upper bound, `bar` would be present in `details`.</span>


<span class="k">class</span><span class="w"> </span><span class="nc">SerializeAsAnyError</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]):</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">details</span><span class="p">:</span> <span class="n">SerializeAsAny</span><span class="p">[</span><span class="n">ErrorDataT</span><span class="p">]</span>


<span class="c1"># serialized as Any</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">SerializeAsAnyError</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="n">details</span><span class="o">=</span><span class="n">MyErrorDetails</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;var&#39;</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;baz&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">assert</span> <span class="n">error</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span> <span class="o">==</span> <span class="p">{</span>
    <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;We just had an error&#39;</span><span class="p">,</span>
    <span class="s1">&#39;details&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;var&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="dynamic-model-creation">动态模型创建<a class="headerlink" href="#dynamic-model-creation" title="Permanent link">&para;</a></h2>
<details class="api">
<summary>API 文档</summary>
<p><a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.create_model"><code>pydantic.main.create_model</code></a><br></p>
</details>
<p>在某些情况下，需要使用运行时信息来指定字段创建模型。
Pydantic提供了<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.create_model"><code>create_model()</code></a>函数来允许动态创建模型：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">create_model</span>

<span class="n">DynamicFoobarModel</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span><span class="s1">&#39;DynamicFoobarModel&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="mi">123</span><span class="p">))</span>

<span class="c1"># Equivalent to:</span>


<span class="k">class</span><span class="w"> </span><span class="nc">StaticFoobarModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">123</span>
</code></pre></div>
<p>字段定义被指定为关键字参数，应该是以下之一：</p>
<ul>
<li>单个元素，表示字段的类型注解。</li>
<li>一个二元组，第一个元素是类型，第二个元素是分配的值
  （可以是默认值或<a class="autorefs autorefs-internal" href="../../api/fields/#pydantic.fields.Field"><code>Field()</code></a>函数）。</li>
</ul>
<p>这是一个更高级的示例：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Annotated</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span><span class="p">,</span> <span class="n">PrivateAttr</span><span class="p">,</span> <span class="n">create_model</span>

<span class="n">DynamicModel</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
    <span class="s1">&#39;DynamicModel&#39;</span><span class="p">,</span>
    <span class="n">foo</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;FOO&#39;</span><span class="p">)),</span>
    <span class="n">bar</span><span class="o">=</span><span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Bar field&#39;</span><span class="p">)],</span>
    <span class="n">_private</span><span class="o">=</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)),</span>
<span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">StaticModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;FOO&#39;</span><span class="p">)</span>
    <span class="n">bar</span><span class="p">:</span> <span class="n">Annotated</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Bar field&#39;</span><span class="p">)]</span>
    <span class="n">_private</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>特殊的关键字参数<code>__config__</code>和<code>__base__</code>可用于自定义新模型。
这包括使用额外字段扩展基础模型。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">create_model</span>


<span class="k">class</span><span class="w"> </span><span class="nc">FooModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">foo</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">123</span>


<span class="n">BarModel</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
    <span class="s1">&#39;BarModel&#39;</span><span class="p">,</span>
    <span class="n">apple</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;russet&#39;</span><span class="p">),</span>
    <span class="n">banana</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">),</span>
    <span class="n">__base__</span><span class="o">=</span><span class="n">FooModel</span><span class="p">,</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">BarModel</span><span class="p">)</span>
<span class="c1">#&gt; &lt;class &#39;__main__.BarModel&#39;&gt;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">BarModel</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="c1">#&gt; dict_keys([&#39;foo&#39;, &#39;bar&#39;, &#39;apple&#39;, &#39;banana&#39;])</span>
</code></pre></div>
<p>您还可以通过向<code>__validators__</code>参数传递字典来添加验证器。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="n">create_model</span><span class="p">,</span> <span class="n">field_validator</span>


<span class="k">def</span><span class="w"> </span><span class="nf">alphanum</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">v</span><span class="o">.</span><span class="n">isalnum</span><span class="p">(),</span> <span class="s1">&#39;must be alphanumeric&#39;</span>
    <span class="k">return</span> <span class="n">v</span>


<span class="n">validators</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;username_validator&#39;</span><span class="p">:</span> <span class="n">field_validator</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)(</span><span class="n">alphanum</span><span class="p">)</span>  <span class="c1"># (1)!</span>
<span class="p">}</span>

<span class="n">UserModel</span> <span class="o">=</span> <span class="n">create_model</span><span class="p">(</span>
    <span class="s1">&#39;UserModel&#39;</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span> <span class="n">__validators__</span><span class="o">=</span><span class="n">validators</span>
<span class="p">)</span>

<span class="n">user</span> <span class="o">=</span> <span class="n">UserModel</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;scolvin&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="c1">#&gt; username=&#39;scolvin&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">UserModel</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s1">&#39;scolvi%n&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for UserModel</span>
<span class="sd">    username</span>
<span class="sd">      Assertion failed, must be alphanumeric [type=assertion_error, input_value=&#39;scolvi%n&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<ol>
<li>确保验证器名称不与任何字段名称冲突，因为
   在内部，Pydantic将所有成员收集到一个命名空间中，并模拟使用
   <a href="https://docs.python.org/3/library/types.html#dynamic-type-creation"><code>types</code>模块工具</a>正常创建类的过程。</li>
</ol>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>要pickle一个动态创建的模型：</p>
<ul>
<li>模型必须在全局范围内定义</li>
<li>必须提供<code>__module__</code>参数</li>
</ul>
</div>
<h2 id="rootmodel-and-custom-root-types"><code>RootModel</code> 和自定义根类型<a class="headerlink" href="#rootmodel-and-custom-root-types" title="Permanent link">&para;</a></h2>
<details class="api">
<summary>API 文档</summary>
<p><a class="autorefs autorefs-internal" href="../../api/root_model/#pydantic.root_model.RootModel"><code>pydantic.root_model.RootModel</code></a><br></p>
</details>
<p>Pydantic模型可以通过子类化<a class="autorefs autorefs-internal" href="../../api/root_model/#pydantic.root_model.RootModel"><code>pydantic.RootModel</code></a>来定义"自定义根类型"。</p>
<p>根类型可以是Pydantic支持的任何类型，并通过<code>RootModel</code>的泛型参数指定。
根值可以通过第一个也是唯一的参数传递给模型的<code>__init__</code>或<a class="autorefs autorefs-internal" href="../../api/base_model/#pydantic.BaseModel.model_validate"><code>model_validate</code></a>。</p>
<p>以下是一个示例，说明这是如何工作的：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">RootModel</span>

<span class="n">Pets</span> <span class="o">=</span> <span class="n">RootModel</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
<span class="n">PetsByName</span> <span class="o">=</span> <span class="n">RootModel</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Pets</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">]))</span>
<span class="c1">#&gt; root=[&#39;dog&#39;, &#39;cat&#39;]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Pets</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">())</span>
<span class="c1">#&gt; [&quot;dog&quot;,&quot;cat&quot;]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Pets</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">]))</span>
<span class="c1">#&gt; root=[&#39;dog&#39;, &#39;cat&#39;]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Pets</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">())</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{&#39;items&#39;: {&#39;type&#39;: &#39;string&#39;}, &#39;title&#39;: &#39;RootModel[list[str]]&#39;, &#39;type&#39;: &#39;array&#39;}</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">PetsByName</span><span class="p">({</span><span class="s1">&#39;Otis&#39;</span><span class="p">:</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;Milo&#39;</span><span class="p">:</span> <span class="s1">&#39;cat&#39;</span><span class="p">}))</span>
<span class="c1">#&gt; root={&#39;Otis&#39;: &#39;dog&#39;, &#39;Milo&#39;: &#39;cat&#39;}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">PetsByName</span><span class="p">({</span><span class="s1">&#39;Otis&#39;</span><span class="p">:</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;Milo&#39;</span><span class="p">:</span> <span class="s1">&#39;cat&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">())</span>
<span class="c1">#&gt; {&quot;Otis&quot;:&quot;dog&quot;,&quot;Milo&quot;:&quot;cat&quot;}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">PetsByName</span><span class="o">.</span><span class="n">model_validate</span><span class="p">({</span><span class="s1">&#39;Otis&#39;</span><span class="p">:</span> <span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;Milo&#39;</span><span class="p">:</span> <span class="s1">&#39;cat&#39;</span><span class="p">}))</span>
<span class="c1">#&gt; root={&#39;Otis&#39;: &#39;dog&#39;, &#39;Milo&#39;: &#39;cat&#39;}</span>
</code></pre></div>
<p>如果您想直接访问<code>root</code>字段中的项目或迭代这些项目，您可以实现
自定义的<code>__iter__</code>和<code>__getitem__</code>函数，如下例所示。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">RootModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Pets</span><span class="p">(</span><span class="n">RootModel</span><span class="p">):</span>
    <span class="n">root</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>


<span class="n">pets</span> <span class="o">=</span> <span class="n">Pets</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pets</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c1">#&gt; dog</span>
<span class="nb">print</span><span class="p">([</span><span class="n">pet</span> <span class="k">for</span> <span class="n">pet</span> <span class="ow">in</span> <span class="n">pets</span><span class="p">])</span>
<span class="c1">#&gt; [&#39;dog&#39;, &#39;cat&#39;]</span>
</code></pre></div>
<p>您也可以直接创建参数化根模型的子类：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">RootModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Pets</span><span class="p">(</span><span class="n">RootModel</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">describe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Pets: </span><span class="si">{</span><span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>


<span class="n">my_pets</span> <span class="o">=</span> <span class="n">Pets</span><span class="o">.</span><span class="n">model_validate</span><span class="p">([</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="s1">&#39;cat&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">my_pets</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>
<span class="c1">#&gt; Pets: dog, cat</span>
</code></pre></div>
<h2 id="faux-immutability">伪不可变性<a class="headerlink" href="#faux-immutability" title="Permanent link">&para;</a></h2>
<p>可以通过<code>model_config['frozen'] = True</code>将模型配置为不可变。设置此选项后，尝试更改
实例属性的值将引发错误。有关更多详细信息，请参阅<a class="autorefs autorefs-internal" href="../../api/config/#pydantic.config.ConfigDict.frozen">API参考</a>。</p>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>在Pydantic V1中，此行为通过配置设置<code>allow_mutation = False</code>实现。
此配置标志在Pydantic V2中已弃用，并已被<code>frozen</code>替换。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>在Python中，不可变性不是强制执行的。开发人员有能力修改
通常被认为是"不可变"的对象，如果他们选择这样做的话。</p>
</div>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ConfigDict</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">FooBarModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">dict</span>


<span class="n">foobar</span> <span class="o">=</span> <span class="n">FooBarModel</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;apple&#39;</span><span class="p">:</span> <span class="s1">&#39;pear&#39;</span><span class="p">})</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">foobar</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;different&#39;</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    1 validation error for FooBarModel</span>
<span class="sd">    a</span>
<span class="sd">      Instance is frozen [type=frozen_instance, input_value=&#39;different&#39;, input_type=str]</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="n">foobar</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
<span class="c1">#&gt; hello</span>
<span class="nb">print</span><span class="p">(</span><span class="n">foobar</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
<span class="c1">#&gt; {&#39;apple&#39;: &#39;pear&#39;}</span>
<span class="n">foobar</span><span class="o">.</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;grape&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">foobar</span><span class="o">.</span><span class="n">b</span><span class="p">)</span>
<span class="c1">#&gt; {&#39;apple&#39;: &#39;grape&#39;}</span>
</code></pre></div>
<p>尝试更改<code>a</code>导致错误，<code>a</code>保持不变。然而，字典<code>b</code>是可变的，<code>foobar</code>的
不可变性不会阻止<code>b</code>被更改。</p>
<h2 id="_6">抽象基类<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>Pydantic模型可以与Python的
<a href="https://docs.python.org/3/library/abc.html">抽象基类</a> (ABCs)一起使用。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">abc</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">FooBarModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">int</span>

    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">my_abstract_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>
<h2 id="field-ordering">字段排序<a class="headerlink" href="#field-ordering" title="Permanent link">&para;</a></h2>
<p>字段顺序在以下方面影响模型：</p>
<ul>
<li>字段顺序在模型的<a href="../json_schema/">JSON Schema</a>中保持不变</li>
<li>字段顺序在<a href="#error-handling">验证错误</a>中保持不变</li>
<li>字段顺序在<a href="../serialization/#serializing-data">序列化数据</a>时保持不变</li>
</ul>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">ValidationError</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">a</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">b</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">c</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">d</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">e</span><span class="p">:</span> <span class="nb">float</span>


<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="c1">#&gt; dict_keys([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;])</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span><span class="n">e</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">model_dump</span><span class="p">())</span>
<span class="c1">#&gt; {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 1, &#39;d&#39;: 0, &#39;e&#39;: 2.0}</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">Model</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="n">error_locations</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="s1">&#39;loc&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">err</span><span class="o">.</span><span class="n">errors</span><span class="p">()]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">error_locations</span><span class="p">)</span>
<span class="c1">#&gt; [(&#39;a&#39;,), (&#39;b&#39;,), (&#39;c&#39;,), (&#39;d&#39;,), (&#39;e&#39;,)]</span>
</code></pre></div>
<h2 id="_7">自动排除的属性<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<h3 id="_8">类变量<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>用<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/typing.html#typing.ClassVar"><code>ClassVar</code></a>注解的属性被Pydantic正确视为类变量，并且不会
成为模型实例的字段：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">ClassVar</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Model</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1">#&gt; y=2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Model</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="c1">#&gt; 1</span>
</code></pre></div>
<h3 id="_9">私有模型属性<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<details class="api">
<summary>API 文档</summary>
<p><a class="autorefs autorefs-internal" href="../../api/fields/#pydantic.fields.PrivateAttr"><code>pydantic.fields.PrivateAttr</code></a><br></p>
</details>
<p>名称带有前导下划线的属性不被Pydantic视为字段，并且不包含在
模型模式中。相反，这些属性被转换为"私有属性"，在调用
<code>__init__</code>、<code>model_validate</code>等期间不会被验证甚至设置。</p>
<p>以下是一个使用示例：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="n">randint</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">PrivateAttr</span>


<span class="k">class</span><span class="w"> </span><span class="nc">TimeAwareModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">_processed_at</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="n">PrivateAttr</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="n">_secret_value</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">model_post_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># this could also be done with `default_factory`:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_secret_value</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>


<span class="n">m</span> <span class="o">=</span> <span class="n">TimeAwareModel</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_processed_at</span><span class="p">)</span>
<span class="c1">#&gt; 2032-01-02 03:04:05.000006</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">_secret_value</span><span class="p">)</span>
<span class="c1">#&gt; 3</span>
</code></pre></div>
<p>私有属性名称必须以下划线开头，以防止与模型字段冲突。但是，双下划线名称
（如<code>__attr__</code>）不受支持，并且会从模型定义中完全忽略。</p>
<h2 id="_10">模型签名<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<p>所有Pydantic模型都将基于其字段生成签名：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>


<span class="k">class</span><span class="w"> </span><span class="nc">FooModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span>
    <span class="n">apple</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s1">&#39;pear&#39;</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">FooModel</span><span class="p">))</span>
<span class="c1">#&gt; (*, id: int, name: str = None, description: str = &#39;Foo&#39;, pear: int) -&gt; None</span>
</code></pre></div>
<p>准确的签名对于内省目的和像<code>FastAPI</code>或<code>hypothesis</code>这样的库很有用。</p>
<p>生成的签名也会尊重自定义的<code>__init__</code>函数：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">inspect</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyModel</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">info</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;My custom init!&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="n">bar</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">)</span>


<span class="nb">print</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">MyModel</span><span class="p">))</span>
<span class="c1">#&gt; (id: int = 1, *, bar: str, info: str = &#39;Foo&#39;) -&gt; None</span>
</code></pre></div>
<p>要包含在签名中，字段的别名或名称必须是有效的Python标识符。
Pydantic在生成签名时会优先使用字段的别名而不是其名称，但如果别名
不是有效的Python标识符，则可能使用字段名称。</p>
<p>如果字段的别名和名称都<em>不是</em>有效的标识符（这可能是通过<code>create_model</code>的异乎寻常使用实现的），
则会添加一个<code>**data</code>参数。此外，如果<code>model_config['extra'] == 'allow'</code>，
<code>**data</code>参数将始终出现在签名中。</p>
<h2 id="_11">结构化模式匹配<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h2>
<p>Pydantic支持模型的结构化模式匹配，这是Python 3.10中由<a href="https://peps.python.org/pep-0636/">PEP 636</a>引入的。</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Pet</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">species</span><span class="p">:</span> <span class="nb">str</span>


<span class="n">a</span> <span class="o">=</span> <span class="n">Pet</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Bones&#39;</span><span class="p">,</span> <span class="n">species</span><span class="o">=</span><span class="s1">&#39;dog&#39;</span><span class="p">)</span>

<span class="k">match</span> <span class="n">a</span><span class="p">:</span>
    <span class="c1"># match `species` to &#39;dog&#39;, declare and initialize `dog_name`</span>
    <span class="k">case</span> <span class="n">Pet</span><span class="p">(</span><span class="n">species</span><span class="o">=</span><span class="s1">&#39;dog&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">dog_name</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">dog_name</span><span class="si">}</span><span class="s1"> is a dog&#39;</span><span class="p">)</span>
<span class="c1">#&gt; Bones is a dog</span>
    <span class="c1"># default case</span>
    <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No dog matched&#39;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>match-case语句可能看起来像是创建了一个新模型，但不要被误导；
它只是获取属性并比较它或声明和初始化它的语法糖。</p>
</div>
<h2 id="attribute-copies">属性复制<a class="headerlink" href="#attribute-copies" title="Permanent link">&para;</a></h2>
<p>在许多情况下，传递给构造函数的参数将被复制以执行验证，并在必要时进行强制类型转换。</p>
<p>在这个例子中，请注意列表的ID在类构造后发生了变化，因为它在验证过程中被复制了：</p>
<div class="language-python highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>


<span class="k">class</span><span class="w"> </span><span class="nc">C1</span><span class="p">:</span>
    <span class="n">arr</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_arr</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arr</span> <span class="o">=</span> <span class="n">in_arr</span>


<span class="k">class</span><span class="w"> </span><span class="nc">C2</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">arr</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>


<span class="n">arr_orig</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>


<span class="n">c1</span> <span class="o">=</span> <span class="n">C1</span><span class="p">(</span><span class="n">arr_orig</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">C2</span><span class="p">(</span><span class="n">arr</span><span class="o">=</span><span class="n">arr_orig</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="n">c1</span><span class="o">.</span><span class="n">arr</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">id</span><span class="p">(</span><span class="n">c2</span><span class="o">.</span><span class="n">arr</span><span class="p">)</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c1">#&gt; id(c1.arr) == id(c2.arr)=False</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">注意</p>
<p>在某些情况下，Pydantic不会复制属性，例如传递模型时——我们按原样使用
模型。您可以通过设置
<a href="../../api/config/#pydantic.config.ConfigDict"><code>model_config['revalidate_instances'] = 'always'</code></a>来覆盖此行为。</p>
</div>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a href="https://github.com/oaixnah" target="_blank">译者 oaixnah</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "announce.dismiss", "navigation.tabs", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"alias": true, "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>